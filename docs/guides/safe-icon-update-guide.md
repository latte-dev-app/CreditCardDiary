# データを保持したままアイコンを更新する方法

## ✅ 重要：データは削除されません

**PWAのデータはブラウザのストレージ（IndexedDB/LocalStorage）に保存されています。**
- ホーム画面からアイコンを削除しても、**アプリのデータは削除されません**
- データはSafariのストレージに保存されているため、アイコンとは独立しています

## 🛡️ 念のためのバックアップ方法（任意）

### 方法1: アプリ内でデータをエクスポート（推奨）

1. **アプリを開く**
   - ホーム画面のアプリアイコンから開く、またはSafariで開く

2. **設定画面でデータをエクスポート**
   - 設定画面からデータエクスポート機能を使用（もし実装されていれば）
   - または、重要なデータを手動でメモ

3. **アイコン更新後、データが残っていることを確認**

### 方法2: Safariの開発者ツールで確認（上級者向け）

1. **MacとiPhoneを接続**
2. **Safariの開発者ツールでストレージを確認**
   - IndexedDBやLocalStorageにデータが保存されていることを確認

## 🚀 アイコン更新手順（データ保持）

### ステップ1: ホーム画面からアイコンを削除

1. **ホーム画面でアプリアイコンを長押し**
   - アイコンが揺れ始めます

2. **「Appを削除」をタップ**
   - ⚠️ **重要**: これでアイコンは削除されますが、**データは削除されません**

### ステップ2: Safariのキャッシュをクリア

1. **「設定」→「Safari」→「履歴とWebサイトデータを消去」**

### ステップ3: PWAを再追加

1. **SafariでPWAを開く**
   - ブックマークから、またはURLを直接入力

2. **ホーム画面に再追加**
   - 共有ボタン → 「ホーム画面に追加」

3. **データが残っていることを確認**
   - アプリを開いて、カードや取引データが表示されることを確認

## ✅ 確認方法

### データが保持されているか確認

1. **アプリを開く**
2. **カード一覧を確認**
   - 以前登録したカードが表示されるか
3. **取引データを確認**
   - 以前入力した取引が表示されるか
4. **予算設定を確認**
   - 設定した予算が残っているか

## 🔍 データが消えた場合（非常に稀）

### 原因
- Safariのストレージが満杯になった
- ブラウザのデータを手動で削除した
- iOSのストレージが不足している

### 対処法
1. **iCloudバックアップを確認**（もし有効なら）
2. **Safariの設定を確認**
   - 設定 → Safari → 「Webサイトデータを消去」が実行されていないか
3. **アプリの再インストール前にエクスポート機能を使用**

## 💡 技術的な詳細

### データの保存場所

PWAのデータは以下の場所に保存されています：

- **SharedPreferences（Web版）**: IndexedDBまたはLocalStorage
- **保存キー**: 
  - `cards_data` - カード情報
  - `transactions_data` - 取引データ
  - `card_budgets_data` - カード別予算
  - `total_budgets_data` - 全体予算

### アイコンの保存場所

- **ホーム画面のアイコン**: iOSのシステムキャッシュ
- **アイコンのファイル**: `web/icons/`ディレクトリ

### なぜデータは削除されないのか？

- **アイコン**: iOSのホーム画面システムに保存
- **データ**: Safariブラウザのストレージに保存
- **独立**: これらは完全に独立しているため、アイコンを削除してもデータは残ります

## 📝 チェックリスト

アイコン更新前に：

- [ ] 重要なデータをメモ（任意）
- [ ] アプリが正常に動作していることを確認
- [ ] バックアップを取る（任意、推奨）

アイコン更新後：

- [ ] アプリを開く
- [ ] カード一覧が表示されることを確認
- [ ] 取引データが表示されることを確認
- [ ] 予算設定が残っていることを確認

## 🎯 まとめ

**結論**: ホーム画面からアイコンを削除しても、PWAのデータは削除されません。

- ✅ データは安全に保持されます
- ✅ アイコンを削除して再追加しても問題ありません
- ✅ 念のため、重要なデータはメモしておくことを推奨します

