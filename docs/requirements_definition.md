# クレジットカード使用額トラッカー 要件定義書

## 1. 概要

自分が使用しているクレジットカードの毎月の使用額を、**直感的・視覚的に**記録・確認できるWebアプリ（PWA対応）。

カードを登録し、月ごとの使用金額を手動入力して、使用推移を確認できる。

ブラウザにデータを保存するため、**オフラインでも動作可能**。

---

## 2. 目的・背景

- 各カード会社のアプリでは、**全カードの使用額を統合して確認しにくい**
- Excelやメモでは視覚的な把握が難しい
- そこで、**自分専用の記録・分析アプリ**を作成し、支出傾向を簡単に管理したい

---

## 3. 想定ユーザー

- クレジットカードを複数持つ個人ユーザー
- 月ごとの支出管理をしたい人
- データをクラウドに上げたくない・ローカルで管理したい人

---

## 4. 機能要件

### 4.1 カード管理

| 項目 | 内容 |
| --- | --- |
| カード登録 | カード名、カード種類、色を登録 |
| カード編集 | 登録済みカードの情報を編集可能 |
| カード削除 | カードとその支出をまとめて削除 |

### 4.2 支出管理

| 項目 | 内容 |
| --- | --- |
| 支出追加 | カード別に年・月を指定して金額を記録 |
| 支出削除 | 個別の支出を削除可能 |
| 月別集計 | 選択した年月の合計を自動計算 |

### 4.3 表示機能

| 項目 | 内容 |
| --- | --- |
| ホーム画面 | 選択年月のカード別使用額を表示 |
| カード詳細画面 | カード別の支出リストを表示 |
| 月間合計表示 | 選択月の全体合計金額を表示 |

### 4.4 データ管理

| 項目 | 内容 |
| --- | --- |
| ローカル保存 | SharedPreferencesでブラウザ内に保存 |
| データエクスポート | JSON形式でデータをコピー |
| データインポート | JSON形式のデータを貼り付けてインポート |
| 全データ削除 | 全てのデータを一度に削除 |

---

## 5. データ構造

### 5.1 CreditCard（クレジットカード情報）

| 項目 | 型 | 説明 | 例 |
| --- | --- | --- | --- |
| `id` | String | 一意のカードID（UUID） | "1698501234567" |
| `name` | String | カード名 | "楽天カード" |
| `type` | String | カード種類 | "Visa" |
| `color` | String | カード表示色（16進数） | "#FF6B6B" |

### 5.2 Transaction（支出情報）

| 項目 | 型 | 説明 | 例 |
| --- | --- | --- | --- |
| `id` | String | 一意の支出ID | "1698501234568" |
| `cardId` | String | 紐づくカードのID | "1698501234567" |
| `title` | String | 支出タイトル（固定: "支出"） | "支出" |
| `amount` | int | 金額 | 3500 |
| `year` | int | 年 | 2025 |
| `month` | int | 月 | 10 |

---

## 6. 画面構成

### 6.1 ホーム画面（全体サマリー）

**機能**：
- 選択年月の全体合計金額を表示
- カード別の月間使用額を一覧表示
- 年度をプルダウンで選択
- 左右の矢印で月を移動

**主要要素**：
- AppBar：クレジットカードトラッカー
- 月間合計表示エリア
- カード一覧
- 「+」ボタン：カード追加

### 6.2 カード詳細画面

**機能**：
- カード情報の表示
- 最新月の合計使用額表示
- そのカードの支出リスト
- カード編集
- カード削除
- 支出追加

**主要要素**：
- AppBar：カード名、編集・削除ボタン
- カード情報カード
- 最新月の合計額
- 支出一覧（年月、金額、削除ボタン）
- 「+」ボタン：支出追加

### 6.3 設定画面

**機能**：
- データエクスポート
- データインポート
- 全データ削除

---

## 7. 非機能要件

| 分類 | 内容 |
| --- | --- |
| オフライン動作 | SharedPreferencesによるローカル保存 |
| データ保存 | ブラウザの`localStorage`（SharedPreferences Web対応） |
| セキュリティ | 個人利用、データは外部送信なし |
| パフォーマンス | ローカルデータアクセス100ms以下 |
| UI/UX | Material Design 3、レスポンシブ対応 |
| ブラウザ対応 | Chrome / Safari / Edge（最新版） |

---

## 8. 技術スタック

| 分類 | 技術・パッケージ名 |
| --- | --- |
| フレームワーク | Flutter（Web対応） |
| 言語 | Dart |
| データ保存 | shared_preferences |
| グラフ描画 | fl_chart |
| 状態管理 | provider |
| UIコンポーネント | Material 3 |
| 日付フォーマット | intl |

---

## 9. ディレクトリ構成

```
lib/
├── main.dart              # アプリケーションのエントリーポイント
├── models/
│   └── card_model.dart    # カードと支出のデータモデル
├── providers/
│   └── card_provider.dart # 状態管理とデータ操作
├── screens/
│   ├── main_screen.dart   # メイン画面（ナビゲーション）
│   ├── home_screen.dart   # ホーム画面（月別表示）
│   ├── card_detail_screen.dart # カード詳細画面
│   └── settings_screen.dart   # 設定画面
├── widgets/
│   └── summary_card.dart  # サマリー表示ウィジェット
└── utils/
    └── local_storage.dart # ローカルストレージ操作ユーティリティ
```

---

## 10. 運用・管理方針

- 利用は個人端末限定（Webアプリとして自分のブラウザ上で完結）
- バージョン管理はGitHubリポジトリ
- デプロイ先：GitHub Pages または Firebase Hosting（無料枠で可）

---

## ✅ 要件定義のポイント

- Windowsだけで開発〜利用可能
- データはローカル保存（プライバシー100%確保）
- シンプルな操作で直感的に利用可能
